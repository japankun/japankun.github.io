##PC設定編

###QoSパケットスケジューラを無効化する

####概要
アプリケーションの使用する通信に優先度や帯域制限をすることで、優先度の高いアプリケーションの通信を快適にする。
一方で、通信の優先度を考慮したり、通信に余裕を持たせるため、パケットの送信が遅れたりすることがある。

####設定方法
コントロールパネル＞ネットワークとインターネット＞インターネット共有センター＞アダプター設定の変更＞インターネット接続で使用しているネットワークアダプターを右クリック＞プロパティ＞ネットワークタブ＞QoSパケットスケジューラ

QoSパケットスケジューラのチェックを外す

###チェックサムオフロードを無効化する(ネットワークインターフェース別)

####概要
OSで処理しているパケットの整合性判断をネットワークインターフェースで行い、CPUの負荷を減らす。
一方で、ネットワークインターフェースの処理をOSが待つ形になるため、CPUに余裕がある場合は通信が遅くなることがある。

####設定方法
コントロールパネル＞ネットワークとインターネット＞インターネット共有センター＞アダプター設定の変更＞インターネット接続で使用しているネットワークアダプターを右クリック＞プロパティ＞ネットワークタブ＞構成ボタン＞詳細設定

以下の項目を無効にする

 - IPv4 チェックサムオフロード
 - TCPチェックサムオフロード(IPv4)
 - TCPチェックサムオフロード(IPv6)
 - UDPチェックサムオフロード(IPv4)
 - UDPチェックサムオフロード(IPv6)
 - 一括送信オフロードv2(IPv4)
 - 一括送信オフロードv2(IPv6)
 - ジャンボフレーム
 - 受信側スケーリング

###Scalable Networking Packを無効化する

####概要
数Gbpsを超える通信が発生するネットワーク上で、通信によるCPU負荷を減らす。
一方で、TCPパケットのロストなどが発生することがある。
(BF4はUDP通信を使用するため効果がないと思われる)

####設定方法
スタート＞システムツール＞コマンドプロンプトを右クリック＞管理者として実行

以下のコマンドを実行

 - netsh int tcp set global chimney=disabled
 - netsh int tcp set global rss=disabled
 - netsh int tcp set global netdma=disabled
 - netsh int tcp show global

最後に以下の項目がdisabledであることを確認する

 - Receive-Side Scaling状態
 - Chimney オフロード状態
 - NetDMA 状態

##レジストリ編
###チェックサムオフロードを無効化する(OS全体編)

####概要
*チェックサムオフロードを無効化する(ネットワークインターフェース別)*と同じ効果、全てのネットワークインターフェースで無効化したい場合に使用する。

####設定方法
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters

新規DWORD値「DisableTaskOffload」を作成、値を「1」にする

※設定後は再起動が必要

###Prefetchを無効化する
####概要
HDD、SSDに保存されている、アプリケーションで必要とされるファイル等をメモリに先読みし、アプリケーションの起動を高速化させる。
一方で、余計なファイルをメモリへ読み込んだり、予期せずディスクへのアクセスが発生することがある。

####設定方法
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Memory Management\PrefetchParameters

DWORD値「EnablePrefetcher」の値を「0」にする

※設定後は再起動が必要

###MTU値最適化
####概要
ネットワークに送信する最大データ量MTU(Maximum Transmission Unit)を適切な数値にすることで送信したデータが通信経路に存在する機器によって分割される事を防ぐ。

####設定方法
1. コマンドプロンプトで「ping -l 1500 -f google.co.jp」を実行する
* 「パケットの断片化が必要ですが、DF が設定されています。」が出た場合は数値(1500)を少しずつ下げていく
* **応答があった数値+28**が最適MTU値

####最適MTU値別の数値
|回線名|最適値|応答が来る最大の数値|
|---|---|---|
|フレッツ(西) 光プレミアム|1438|1410|
|フレッツ(東) 光ネクスト|1454|1426|
|auひかり 1Gbps|1492|1464|
|NURO光|1500|1472|

####信頼出来るソース
- [フレッツ(西) 光プレミアム](https://www.xephion.ne.jp/is/support/enter_setup.html)
- [フレッツ(東) 光ネクスト](http://faq.flets.com/faq/show/246)
- auひかり 1Gbps *公式なソースなしお
- [NURO光](http://www.bit-drive.ne.jp/support/technical/nuro-access/02-onu-led.html)
